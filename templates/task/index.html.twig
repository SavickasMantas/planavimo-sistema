{% extends 'base.html.twig' %}

{% block title %}Tasks management page!{% endblock %}

{% block content %}
    <div class="container" style="text-align: left; margin-left: 0px; width: 100%; max-width: 100%;">
        <a href="{{ path('schedule') }}/schedule_id={{ schedule_id }}/create" class="btn btn-light" style="border-color: #d6d6d6;" role="button">Create new task</a>
        <h1 class="">All your tasks according to your chosen schedule:</h1>
        <table class="table table-striped">
            <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Description</th>
                <th>Detail</th>
                <th>End date</th>
                <th></th>
            </tr>
            {% for task in tasks %}
                <tr>
                    <td>{{ task.id }}</td>
                    <td style="max-width: 150px;">{{ task.title }}</td>
                    <td style="max-width: 300px;">{{ task.description|length > 50 ? task.description|slice(0, 51)|split(' ')|slice(0, -1)|join(' ') ~ '…' : task.description }}</td>
                    <td style="max-width: 250px;">{{ task.detail|length > 50 ? task.detail|slice(0, 51)|split(' ')|slice(0, -1)|join(' ') ~ '…' : task.detail }}</td>
                    <td>{{ task.taskEndDate|date('Y-m-d H:i:s') }}</td>
                    <td class="text-right">
                        <a class="btn btn-success mx-1 my-1" href="{{ path('schedule') }}/schedule_id={{ schedule_id }}/detail/{{ task.id }}">Details</a>
                        <a class="btn btn-success mx-1 my-1" href="{{ path('schedule') }}/schedule_id={{ schedule_id }}/edit/{{ task.id }}">Edit</a>
                        <a class="btn btn-danger mx-1 my-1" href="{{ path('schedule') }}/schedule_id={{ schedule_id }}/remove/{{ task.id }}" >Remove</a>
                    </td>
                </tr>
            {% endfor %}
        </table>
    </div>
{% endblock %}
